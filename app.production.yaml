# app.production.yaml - Secure Google App Engine Configuration
# This version uses Google Secret Manager for sensitive data

runtime: python39

# Environment variables using Google Secret Manager
# This approach keeps secrets out of version control and provides proper security
env_variables:
  # Database Configuration
  DB_NAME: "buildyoursmartcart_production"
  
  # Non-sensitive configuration
  WALMART_KEY_VERSION: "1"
  
  # Application settings
  ENVIRONMENT: "production"
  DEBUG: "False"

# Beta feature: Access secrets from Google Secret Manager
beta_settings:
  cloud_sql_instances: null  # Remove if not using Cloud SQL

# Route handlers
handlers:
  - url: /.*
    script: auto

# Automatic scaling configuration
automatic_scaling:
  min_instances: 0
  max_instances: 3
  target_cpu_utilization: 0.6
  target_throughput_utilization: 0.6

# Resources allocation
resources:
  cpu: 1
  memory_gb: 0.5
  disk_size_gb: 10

# Security settings
service_account: "your-service-account@your-project.iam.gserviceaccount.com"  # Replace with your service account