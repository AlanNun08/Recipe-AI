# app.yaml - PRODUCTION CONFIGURATION TEMPLATE
# Copy this to app.yaml and replace all YOUR_* values with actual credentials

runtime: python39

env_variables:
  NODE_ENV: "production"
  
  # Database Configuration - USE YOUR MONGODB ATLAS CONNECTION STRING
  MONGO_URL: "mongodb+srv://username:password@cluster.mongodb.net"
  DB_NAME: "buildyoursmartcart_production"
  
  # OpenAI API Configuration - GET FROM https://platform.openai.com/api-keys
  OPENAI_API_KEY: "sk-your-openai-api-key-here"
  
  # Stripe Configuration - GET FROM https://dashboard.stripe.com/apikeys
  STRIPE_SECRET_KEY: "sk_live_your-stripe-secret-key-here"
  STRIPE_PUBLISHER_API_KEY: "pk_live_your-stripe-publishable-key-here"
  
  # Walmart API Configuration - GET FROM Walmart Developer Portal
  WALMART_CONSUMER_ID: "your-walmart-consumer-id"
  WALMART_KEY_VERSION: "1"
  WALMART_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nyour-walmart-private-key-here\n-----END PRIVATE KEY-----"
  
  # Mailjet Email Service - GET FROM https://app.mailjet.com/account/api_keys
  MAILJET_API_KEY: "your-mailjet-api-key"
  MAILJET_SECRET_KEY: "your-mailjet-secret-key"
  SENDER_EMAIL: "noreply@buildyoursmartcart.com"
  
  # Security Configuration - GENERATE A RANDOM 32+ CHARACTER STRING
  SECRET_KEY: "your-super-secret-jwt-key-minimum-32-characters"

# The rest of the configuration remains the same...
handlers:
  - url: /static
    static_dir: frontend/build/static
  - url: /(.*\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot))$
    static_files: frontend/build/\1
    upload: frontend/build/.*\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$
  - url: /api/.*
    script: auto
  - url: /health
    script: auto
  - url: /.*
    static_files: frontend/build/index.html
    upload: frontend/build/index.html
  - url: /.*
    script: auto

automatic_scaling:
  min_instances: 0
  max_instances: 10
  target_cpu_utilization: 0.6
  target_throughput_utilization: 0.6

resources:
  cpu: 2
  memory_gb: 2
  disk_size_gb: 10

entrypoint: python main.py

request_timeout: 300

readiness_check:
  path: "/health"
  check_interval_sec: 5
  timeout_sec: 4
  failure_threshold: 2
  success_threshold: 2
  app_start_timeout_sec: 300

liveness_check:
  path: "/health"
  check_interval_sec: 30
  timeout_sec: 4
  failure_threshold: 4
  success_threshold: 2

skip_files:
  - ^(.*/)?#.*#$
  - ^(.*/)?.*~$
  - ^(.*/)?.*\.py[co]$
  - ^(.*/)?.*/RCS/.*$
  - ^(.*/)?\..*$
  - ^(.*/)?node_modules/.*$
  - ^(.*/)?\.venv/.*$
  - ^(.*/)?venv/.*$
  - ^(.*/)?tests/.*$
  - ^(.*/)?test_.*\.py$
  - ^(.*/)?.*_test\.py$
  - ^(.*/)?.*\.md$
  - ^(.*/)?Dockerfile.*$
  - ^(.*/)?cloudbuild\.yaml$
  - ^(.*/)?\.git/.*$